@name exploits/cross_chip_scripting
@persist ENV:gtable

# Created by Fasteroid
# an evolution of exploits/function_copy

# if you can get your FRIEND (configurable) to spawn this E2, you can hack them by pressing E
# the effect persists forever, even if they remove the chip

if( first() ){
    
    FRIEND = "FasteroidBot"
    ENV = gTable("exploits/cross_chip_scripting", 1)
    
    if( findPlayerByName(FRIEND) == owner() ){
        print("you've been pwned")
        
        ENV["magic()",function] = function(Runner:entity){
            if( Runner != owner() ){
                print("cross-chip scripting executed by " + Runner:name() + "!")
                local E = propSpawn("models/hunter/blocks/cube8x8x8.mdl", owner():aimPos() + vec(0,0,20), ang(), 0)
                E:soundPlay(E:id(),1,"garrysmod/balloon_pop_cute.wav")
            }
        }
    }
    
}

event tick(){
    
    if( changed( owner():keyUse() ) & owner():keyUse() ){
        ENV["magic()",function]( owner() )
    }
    
}
